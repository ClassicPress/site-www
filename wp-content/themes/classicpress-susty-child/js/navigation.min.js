const KEYMAP={TAB:9};function initNavigation(){initNavToggleSubmenus(),initNavToggleSmall()}function initNavToggleSubmenus(){const e=document.querySelectorAll(".nav--toggle-sub");if(e.length)for(let t=0;t<e.length;t++)initEachNavToggleSubmenu(e[t])}function initEachNavToggleSubmenu(e){const t=e.querySelectorAll(".menu ul");if(!t.length)return;const n=getDropdownButton();for(let e=0;e<t.length;e++){const o=t[e].parentNode;let l=o.querySelector(".dropdown");if(!l){(l=document.createElement("span")).classList.add("dropdown");const n=document.createElement("i");n.classList.add("dropdown-symbol"),l.appendChild(n),t[e].parentNode.insertBefore(l,t[e])}const a=n.cloneNode(!0);a.innerHTML=l.innerHTML,l.parentNode.replaceChild(a,l),a.addEventListener("click",e=>{toggleSubMenu(e.target.parentNode)}),o.addEventListener("mouseleave",e=>{toggleSubMenu(e.target,!1)}),o.querySelector("a").addEventListener("focus",e=>{const t=e.target.parentNode.parentNode.querySelectorAll("li.menu-item--toggled-on");for(let e=0;e<t.length;e++)toggleSubMenu(t[e],!1)}),t[e].addEventListener("keydown",e=>{const t="ul.toggle-show > li > a, ul.toggle-show > li > button";KEYMAP.TAB===e.keyCode&&(e.shiftKey?isfirstFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1):islastFocusableElement(e.target,document.activeElement,t)&&toggleSubMenu(e.target.parentNode,!1))}),t[e].parentNode.classList.add("menu-item--has-toggle")}}function initNavToggleSmall(){const e=document.querySelectorAll(".nav--toggle-small");if(e.length)for(let t=0;t<e.length;t++)initEachNavToggleSmall(e[t])}function initEachNavToggleSmall(e){const t=e.querySelector(".menu-toggle");t&&(t.setAttribute("aria-expanded","false"),t.addEventListener("click",t=>{e.classList.toggle("nav--toggled-on"),t.target.setAttribute("aria-expanded","false"===t.target.getAttribute("aria-expanded")?"true":"false")},!1))}function toggleSubMenu(e,t){const n=e.querySelector(".dropdown-toggle"),o=e.querySelector("ul");let l=e.classList.contains("menu-item--toggled-on");if(void 0!==t&&"boolean"==typeof t&&(l=!t),n.setAttribute("aria-expanded",(!l).toString()),l){e.classList.remove("menu-item--toggled-on"),o.classList.remove("toggle-show"),n.setAttribute("aria-label",sustyScreenReaderText.expand);const t=e.querySelectorAll(".menu-item--toggled-on");for(let e=0;e<t.length;e++)toggleSubMenu(t[e],!1)}else{const t=e.parentNode.querySelectorAll("li.menu-item--toggled-on");for(let e=0;e<t.length;e++)toggleSubMenu(t[e],!1);e.classList.add("menu-item--toggled-on"),o.classList.add("toggle-show"),n.setAttribute("aria-label",sustyScreenReaderText.collapse)}}function getDropdownButton(){const e=document.createElement("button");return e.classList.add("dropdown-toggle"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label",sustyScreenReaderText.expand),e}function isfirstFocusableElement(e,t,n){const o=e.querySelectorAll(n);return 0<o.length&&t===o[0]}function islastFocusableElement(e,t,n){const o=e.querySelectorAll(n);return 0<o.length&&t===o[o.length-1]}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initNavigation):initNavigation();